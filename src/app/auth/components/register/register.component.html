<div>
    <mat-stepper [linear]="isLinear" #stepper>
        <mat-step [stepControl]="userInfoForm">
            <form [formGroup]="userInfoForm" class="flex m-1 flex-col justify-center items-center">
                <ng-template matStepLabel>Informations d'utilisateur</ng-template>

                <div class="w-3/12 flex justify-between">
                    <mat-form-field class="w-full">
                        <mat-label>Username</mat-label>
                        <input formControlName="username" matInput required>
                        <mat-error *ngIf="userInfoForm.get('username')?.errors?.['required'] && userInfoForm.get('username')?.touched">
                            Ce champs est requis
                        </mat-error>
                        <mat-error *ngIf="userInfoForm.get('username')?.errors?.['minlength'] ">
                            Doit faire minimum 6 caractères
                        </mat-error>
                        <mat-error *ngIf="userInfoForm.get('username')?.errors?.['maxlength']">
                            Doit faire maximum 20 caractères
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="w-3/12 flex justify-between">
                    <mat-form-field class="w-full">
                        <mat-label>Password</mat-label>
                        <input formControlName="password" type="password" matInput required>
                        <mat-error *ngIf="userInfoForm.get('password')?.errors?.['required'] && userInfoForm.get('password')?.touched">
                            Ce champs est requis
                        </mat-error>
                        <mat-error *ngIf="userInfoForm.get('password')?.errors?.['minlength']">
                            Doit faire minimum 6 caractères
                        </mat-error>
                    </mat-form-field>


                </div>

                <div class="w-3/12 flex justify-between">
                    <mat-form-field class="w-56">
                        <mat-label>Prénom</mat-label>
                        <input formControlName="firstName" matInput required>
                        <mat-error *ngIf="userInfoForm.get('firstName')?.errors?.['required'] && userInfoForm.get('firstName')?.touched">
                            Ce champs est requis
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field class="w-56">
                        <mat-label>Nom</mat-label>
                        <input formControlName="lastName" matInput required>
                        <mat-error *ngIf="userInfoForm.get('lastName')?.errors?.['required'] && userInfoForm.get('lastName')?.touched">
                            Ce champs est requis
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="w-3/12 flex justify-between">
                    <mat-form-field class="w-full">
                        <mat-label>Email</mat-label>
                        <input formControlName="email" matInput required>
                        <mat-error *ngIf="userInfoForm.get('email')?.errors?.['required'] && userInfoForm.get('email')?.touched">
                            Ce champs est requis
                        </mat-error>
                        <mat-error *ngIf="userInfoForm.get('email')?.errors?.['email']">
                            L'email n'est pas valide
                        </mat-error>
                    </mat-form-field>
                </div>

                <mat-checkbox (click)="toggleRole()">Vous êtes un recruteur ?</mat-checkbox>


                <div>
                    <button mat-button matStepperNext>Suivant</button>
                </div>
            </form>
        </mat-step>

        <div *ngIf="!isRecruiter">
            <mat-step [stepControl]="devInfoForm" label="Profil de développeur">
                <form [formGroup]="devInfoForm" class="flex m-1 flex-col justify-center items-center">

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Description</mat-label>
                            <textarea matInput
                                      cdkTextareaAutosize
                                      #autosize="cdkTextareaAutosize"
                                      cdkAutosizeMinRows="1"
                                      cdkAutosizeMaxRows="5"
                                      formControlName="description">
                        </textarea>
                        </mat-form-field>

                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Pseudo</mat-label>
                            <input formControlName="pseudo" matInput>
                        </mat-form-field>
                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Technologies back-end</mat-label>
                            <mat-select formControlName="technologyBackEnds" multiple>
                                <mat-option *ngFor="let technology of technologyBackEnd"
                                            [value]="technology">{{technology}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Technologies front-end</mat-label>
                            <mat-select formControlName="technologyFrontEnds" multiple>
                                <mat-option *ngFor="let technology of technologyFrontEnd"
                                            [value]="technology">{{technology}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Github</mat-label>
                            <input formControlName="gitHub" matInput>
                        </mat-form-field>
                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>LinkedIn</mat-label>
                            <input formControlName="linkedIn" matInput>
                        </mat-form-field>
                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>CV</mat-label>
                            <input formControlName="cv" matInput>
                        </mat-form-field>
                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Date de naissance</mat-label>
                            <input type="date" formControlName="birthDate" matInput>
                        </mat-form-field>
                    </div>
                    <div>
                        <button mat-button matStepperPrevious>Back</button>
                        <button mat-button matStepperNext>Next</button>
                    </div>
                </form>
            </mat-step>

            <mat-step [stepControl]="addressForm" label="Votre adresse">
                <form [formGroup]="addressForm" class="flex m-1 flex-col justify-center items-center">

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Rue</mat-label>
                            <input formControlName="street" matInput>
                        </mat-form-field>

                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Numéro</mat-label>
                            <input formControlName="number" matInput>
                        </mat-form-field>
                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Ville</mat-label>
                            <input formControlName="city" matInput>
                        </mat-form-field>
                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Code postal</mat-label>
                            <input formControlName="zipcode" matInput>
                        </mat-form-field>
                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Pays</mat-label>
                            <input formControlName="country" matInput>
                        </mat-form-field>
                    </div>

                    <div>
                        <button mat-button matStepperPrevious>Retour</button>
                        <button mat-button matStepperNext>Suivant</button>
                    </div>
                </form>
            </mat-step>
        </div>

        <div *ngIf="isRecruiter">

            <mat-step *ngIf="isRecruiter" [stepControl]="companyForm" label="Information de l'entreprise">
                <form [formGroup]="companyForm" class="flex m-1 flex-col justify-center items-center">

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Nom</mat-label>
                            <input formControlName="name" matInput>
                            <mat-error *ngIf="companyForm.get('name')?.errors?.['required'] && companyForm.get('name')?.touched">
                                Ce champs est requis
                            </mat-error>
                        </mat-form-field>

                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Description</mat-label>
                            <input formControlName="description" matInput>
                            <mat-error *ngIf="companyForm.get('description')?.errors?.['required'] && companyForm.get('description')?.touched">
                                Ce champs est requis
                            </mat-error>
                        </mat-form-field>
                    </div>

                    <div>
                        <button mat-button matStepperPrevious>Retour</button>
                        <button mat-button matStepperNext>Suivant</button>
                    </div>
                </form>
            </mat-step>

            <mat-step *ngIf="isRecruiter" [stepControl]="addressForm" label="Adresse de votre entreprise">
                <form [formGroup]="addressForm" class="flex m-1 flex-col justify-center items-center">

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Rue</mat-label>
                            <input formControlName="street" matInput>
                        </mat-form-field>

                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Numéro</mat-label>
                            <input formControlName="number" matInput>
                        </mat-form-field>
                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Ville</mat-label>
                            <input formControlName="city" matInput>
                        </mat-form-field>
                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Code postal</mat-label>
                            <input formControlName="zipcode" matInput>
                        </mat-form-field>
                    </div>

                    <div class="w-3/12 flex justify-between">
                        <mat-form-field class="w-full">
                            <mat-label>Pays</mat-label>
                            <input formControlName="country" matInput>
                        </mat-form-field>
                    </div>

                    <div>
                        <button mat-button matStepperPrevious>Retour</button>
                        <button mat-button matStepperNext>Suivant</button>
                    </div>
                </form>
            </mat-step>
        </div>

        <mat-step>
            <ng-template matStepLabel>Finaliser</ng-template>
            <p>You are now done.</p>
            <div>
                <button mat-button matStepperPrevious>Retour</button>
                <button mat-button (click)="stepper.reset()">Réinitialiser</button>
                <button mat-button (click)="register()">Envoyer</button>
            </div>
        </mat-step>
    </mat-stepper>
</div>

